<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Portefeuille de compétences - Gwendoline Bassettte</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />

    <!-- Facebook and Twitter integration -->
    <!-- <meta property="og:title" content="" />
    <meta property="og:image" content="" />
    <meta property="og:url" content="" />
    <meta property="og:site_name" content="" />
    <meta property="og:description" content="" />
    <meta name="twitter:title" content="" />
    <meta name="twitter:image" content="" />
    <meta name="twitter:url" content="" />
    <meta name="twitter:card" content="" /> -->

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="shortcut icon" href="favicon.ico">

    <link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
        integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">


    <!-- Animate.css -->
    <link rel="stylesheet" href="css/animate.css">
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" href="css/icomoon.css">
    <!-- Bootstrap  -->
    <link rel="stylesheet" href="css/bootstrap.css">
    <!-- Flexslider  -->
    <link rel="stylesheet" href="css/flexslider.css">
    <!-- Flaticons  -->
    <link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">
    <!-- Owl Carousel -->
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <!-- Theme style  -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Modernizr JS -->
    <script src="js/modernizr-2.6.2.min.js"></script>
    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
        <script src="js/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <div id="colorlib-page">
        <div class="container-wrap">
            <a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle" data-toggle="collapse" data-target="#navbar"
                aria-expanded="false" aria-controls="navbar"><i></i></a>
            <aside id="colorlib-aside" role="complementary" class="border js-fullheight">
                <div class="text-center">
                    <div class="author-img" style="background-image: url(images/photo_gwendoline.JPG);"></div>
                    <h1 id="colorlib-logo"><a href="index.html">Gwendoline Bassette Chancereul </a></h1>
                    <span class="position">Etudiante en L3 MIAGE en apprentissage</span>
                </div>
                <nav id="colorlib-main-menu" role="navigation" class="navbar">
                    <nav id="colorlib-main-menu" role="navigation" class="navbar">
                        <!-- <div id="navbar" class="collapse"> -->
                        <ul>
                            <li><a href="index.html" data-nav-section="home">Accueil</a></li>
                            <li><a href="ppe1.html">PPE 1 - Application de gestion des oraux de langues (php)</a></li>
                            <li><a href="ppe2.html">PPE 2 - Application de gestion des zones de stockage de GSB (C#)</a>
                            </li>
                            <li class="active"><a href="ppe3.html">PPE 3 - Application de gestion des frais des
                                    visiteurs médicaux (php)</a></li>
                            <li><a href="ppe4.html">PPE 4 - Application de gestion des essais cliniques (Symfony)</a>
                            </li>
                            <li><a href="tpIonic.html">Application de consultation des médecins et des délégués médicaux
                                    (Ionic)</a></li>
                        </ul>
                        <!-- </div> -->
                    </nav>
                </nav>

                <div class="colorlib-footer">
                    <p>
                        <small>
                            &copy;
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                            Copyright &copy;
                            <script>document.write(new Date().getFullYear());</script> All rights reserved | This
                            template is made by <a href="https://colorlib.com" target="_blank">Colorlib</a>
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                            <br> <a href="mentions_legales.html">Mentions légales</a>
                        </small>
                    </p>

                </div>

            </aside>

            <div id="colorlib-main">

                <section class="colorlib-about" data-section="about">
                    <div class="colorlib-narrow-content">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="row row-bottom-padded-sm animate-box" data-animate-effect="fadeInLeft">
                                    <div class="col-md-12">
                                        <div class="about-desc">
                                            <!-- <span class="heading-meta">About Us</span> -->
                                            <h2 class="colorlib-heading">Application de gestion des frais des visiteurs
                                                médicaux de GSB</h2>
                                            <div class="ppe">
                                                <h2 class="title-red">I- Contexte</h2>
                                                <div>
                                                    <div>
                                                        <p>
                                                            <strong> Description : </strong>
                                                        </p>
                                                        <p>
                                                            Le laboratoire Galaxy Swiss Bourdin (GSB) est issu de la
                                                            fusion entre le géant américain Galaxy (spécialisé dans le
                                                            secteur des maladies virales dont
                                                            le sida et les hépatites) et le conglomérat européen Swiss
                                                            Bourdin (travaillant sur des médicaments plus
                                                            conventionnels), lui-même déjà union de trois
                                                            petits laboratoires.
                                                        </p>
                                                        <p>
                                                            En 2009, les deux géants pharmaceutiques ont uni leurs
                                                            forces pour créer un leader de ce secteur industriel.
                                                            L’entité Galaxy Swiss Bourdin Europe a
                                                            établi son siège administratif à Paris.
                                                        </p>
                                                        <p>Le siège social de la multinationale est situé à
                                                            Philadelphie, Pennsylvanie, aux Etats-Unis. </p>
                                                        <p>Le groupe GSB produit et distribue des médicaments dans de
                                                            nombreux pays. </p>
                                                    </div>
                                                    <p>
                                                        <strong>Période : </strong> du 6 novembre au 27 novembre 2019
                                                    </p>
                                                    <p>
                                                        <strong>Equipe : </strong> 5 personnes
                                                    </p>
                                                    <p>
                                                        <strong>Documents joints :</strong>
                                                        <ul>
                                                            <li><a target="_blank"
                                                                    href="files/PPE3/Documents_joints/ArchitectureApplicativeMVC.pdf">Architecture
                                                                    applicative de l'application Web</a></li>
                                                            <li><a target="_blank"
                                                                    href="files/PPE3/Documents_joints/Cahier_des_charges.pdf">Cahier
                                                                    des charges simplifié</a></li>
                                                            <li><a target="_blank"
                                                                    href="files/PPE3/Documents_joints/GSB-ApplisWebPHP-NormesDevlpt.pdf">Normes
                                                                    de développement</a></li>
                                                            <li><a target="_blank"
                                                                    href="files/PPE3/Documents_joints/Fiches_descriptives_cas_utilisation.pdf">Fiches
                                                                    déscriptives des cas d'utilisation</a></li>
                                                            <li>Scripts SQL pour la création de la base de données</li>
                                                            <li>Application de génération des données</li>
                                                            <li>Application de saisie et consultation des frais</li>
                                                        </ul>
                                                    </p>
                                                    <p>
                                                        <strong>Langages : </strong>
                                                        <ul>
                                                            <li>Php</li>
                                                            <li>SQL</li>
                                                            <li>HTML</li>
                                                            <li>CSS</li>
                                                        </ul>
                                                    </p>
                                                    <p>
                                                        <div>
                                                            <strong>Logiciels utilisés :</strong>
                                                            <ul>
                                                                <li>WampServer</li>
                                                                <li>PhpMyAdmin, MySql</li>
                                                                <li>Serveur Web Apache</li>
                                                                <li>Architecture trois tiers</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </p>
                                                <h2 class="title-red">II- Description </h2>
                                                <h3 class="title-green">1- Définition de l'objet</h3>
                                                <div>
                                                    Dans le cadre de leur activité, les visiteurs médicaux de GSB sont
                                                    amenés à engager différents frais qui leur
                                                    sont remboursés sur justificatifs.
                                                    <br />
                                                    Le suivi des frais est actuellement géré de plusieurs façons selon
                                                    la région des visiteurs. On souhaite uniformiser
                                                    cette gestion.
                                                    <br />
                                                    L'application doit permettre d'enregistrer tout frais engagé, aussi
                                                    bien pour l'activité directe (déplacement,
                                                    restauration et hébergement) que pour les activités annexes
                                                    (événementiel, conférences, autres), et de
                                                    présenter un suivi daté des opérations menées par le service
                                                    comptable (réception des pièces, validation de
                                                    la demande de remboursement, mise en paiement, remboursement
                                                    effectué).
                                                    <br /><br />
                                                </div>
                                                <h3 class="title-green">2- Forme de l'objet</h3>
                                                <div>
                                                    L'application Web destinée aux visiteurs, délégués et responsables
                                                    de secteur sera en ligne, accessible depuis
                                                    un ordinateur.
                                                    <br />
                                                    La partie utilisée par les services comptables sera aussi sous forme
                                                    d'une interface Web.
                                                    <br /><br />
                                                </div>
                                                <h3 class="title-green">3- Accessibilité/Sécurité</h3>
                                                <div>
                                                    L'environnement doit être accessible aux seuls acteurs de
                                                    l'entreprise.
                                                    <br />Une authentification préalable sera nécessaire pour l'accès au
                                                    contenu.
                                                    <br /><br />
                                                </div>
                                                <h2 class="title-red">II- Contraintes</h2>
                                                <h3 class="title-green">1- Architecture</h3>
                                                <div>
                                                    L’application respectera l’architecture MVC maison utilisées par les
                                                    scripts fournis concernant la gestion de l’enregistrement des frais
                                                    engagés par les visiteurs.
                                                    <br /><br />
                                                </div>
                                                <h3 class="title-green">2- Ergonomie</h3>
                                                <div>
                                                    Les pages fournies ont été définies suite à une consultation. Elles
                                                    constituent une référence ergonomique.
                                                    Des améliorations ou variations peuvent être proposées.
                                                    <br /><br />
                                                </div>
                                                <h3 class="title-green">3- Codage</h3>
                                                <div>
                                                    Le document “ApplisWeb-NormesDevelpt” présente des règles de bonnes
                                                    pratiques de développement utilisées par le service informatique
                                                    de GSB pour encadrer le développement d’applications en PHP et en
                                                    faciliter la maintenance ; l’application GSB-AppliFrais fournie
                                                    s’efforcera de les mettre en œuvre.
                                                    <br />
                                                    Les éléments à fournir devront respecter le nommage des fichiers,
                                                    variables et paramètres, ainsi que les codes couleurs et
                                                    la disposition des éléments déjà fournis.
                                                    <br /><br />
                                                </div>
                                                <h3 class="title-green">4- Environnement</h3>
                                                <div>
                                                    Le langage de script côté serveur doit être le même que celui
                                                    utilisé dans les pages fournies.
                                                    <br />L'utilisation de bibliothèques, API ou Framework est à
                                                    l'appréciation du prestataire.
                                                    <br /><br />
                                                </div>
                                                <h3 class="title-green">5- Modules</h3>
                                                <div>
                                                    L'application présente deux modules :
                                                    <ul>
                                                        <li>
                                                            Enregistrement et suivi par les visiteurs (code fourni)
                                                        </li>
                                                        <li>
                                                            Enregistrement des opérations par les comptables
                                                        </li>
                                                    </ul>
                                                    <br /><br />
                                                </div>
                                                <h2 class="title-red">III- Description du domaine de gestion</h2>
                                                <h3 class="title-green">1- La gestion des frais de déplacement </h3>
                                                <div>
                                                    Grand poste de dépense, la gestion des frais de déplacement des
                                                    visiteurs demande un suivi très précis.
                                                    L’enveloppe annuelle pour ce seul poste s’élève à près de 25
                                                    millions d’euros. Il n’est donc pas question
                                                    de le laisser s’envoler, tout en ne limitant pas les visiteurs à des
                                                    hôtels de second ordre ou des repas
                                                    chiches (il en va aussi de l’image de marque du laboratoire et de la
                                                    motivation des équipes).
                                                    <br /><br />
                                                    Les prix d’hébergement ou de nourriture étant variables d’un lieu à
                                                    l’autre, d’une région à l’autre, une évaluation
                                                    statistique a permis de dégager un montant forfaitaire dans la
                                                    fourchette haute des dépenses pour chaque type de
                                                    frais standard : repas midi, relais étape (nuit plus repas), nuitée
                                                    (hôtel seul), kilométrage (remboursement des
                                                    frais kilométriques, chaque visiteur dispose d'un badge pour le
                                                    télépéage pour éviter le remboursement de ces petits montants).
                                                    <br />
                                                    À ce jour, les montants forfaitaires sont les suivants :
                                                    <ul>
                                                        <li>110 euros pour un relais étape</li>
                                                        <li>80 euros pour une nuitée</li>
                                                        <li>25 euros pour un repas au restaurant</li>
                                                        <li>0.62 euro pour tout kilomètre parcouru</li>
                                                    </ul>
                                                    <strong>Le remboursement de l'ensemble des frais engagés par les
                                                        visiteurs s’organise mensuellement et donne lieu
                                                        à une fiche de frais identifiée par le numéro du visiteur et le
                                                        mois de l’année.</strong>
                                                    <br /><br />
                                                </div>
                                                <h3 class="title-green">2- Organisation des remboursements</h3>
                                                <div>
                                                    La gestion est la suivante (voir fiche de remboursement fournie) :
                                                    <ul>
                                                        <li>A chaque dépense type (hôtel, repas,...) correspond un
                                                            montant forfaitaire appliqué (on parle de frais
                                                            "forfaitisé"). Le justificatif n’est pas demandé (les
                                                            rapports de visite serviront de preuve) mais doivent
                                                            être conservés pendant trois années par les visiteurs. Des
                                                            contrôles réguliers sont faits par les délégués
                                                            régionaux qui peuvent donner lieu à des demandes de
                                                            remboursement de trop perçu par le visiteur </li>
                                                        <li>Pour toute dépense en dehors du forfait (repas en présence
                                                            d'un spécialiste lors d'une animation, achat de
                                                            fournitures, réservation de salle pour une conférence,
                                                            etc.), le visiteur enregistrera la date, le montant et le
                                                            libellé de la dépense. Il doit fournir au service comptable
                                                            une facture acquittée. Le système à produire doit lui
                                                            indiquer le nombre de justificatifs pris en compte dans le
                                                            remboursement.</li>
                                                    </ul>
                                                    <br /><br />
                                                </div>
                                                <h2 class="title-red">IV- Correction de bug </h2>
                                                <div>
                                                    J’ai reçu le mail suivant d’un utilisateur demandant une correction
                                                    de bug sur l’application de saisie des frais.
                                                    <figure>
                                                        <a href="images/ppe3/correction_bug/ecran/mailBugSaisie.PNG"
                                                            target="_blank">
                                                            <img src="images/ppe3/correction_bug/ecran/mailBugSaisie.PNG"
                                                                alt="Capture d'écran de l'application"
                                                                class="responsive" />
                                                        </a>
                                                    </figure>
                                                    <p>
                                                        J’ai d’abord vérifié que le bug existait. Pour cela, j’ai
                                                        modifié dans la base de données la date d’embauche d’un visiteur
                                                        médical pour que
                                                        date d’embauche soit dans le mois en cours de saisie pour les
                                                        fiches de frais, j’ai donc saisie comme date d’embauche le
                                                        09/11/2019 . Je me suis
                                                        ensuite connecté avec le compte utilisateur du visiteur médical
                                                        que j’ai modifié puis j’ai saisi les informations suivantes :
                                                    </p>
                                                    <figure>
                                                        <a href="images/ppe3/correction_bug/ecran/saisie_verif_bug.PNG"
                                                            target="_blank">
                                                            <img src="images/ppe3/correction_bug/ecran/saisie_verif_bug.png"
                                                                alt="Capture d'écran de l'application"
                                                                class="responsive" />
                                                        </a>
                                                    </figure>
                                                    <p>
                                                        Lorsqu’on valide, aucun message d’erreur ne s’affiche pour
                                                        informer l’utilisateur que
                                                        la date saisie est incorrecte. En effet on obtient l’écran
                                                        suivant : <br><br>
                                                    </p>
                                                    <figure>
                                                        <a href="images/ppe3/correction_bug/ecran/saisie_result_bug1.PNG"
                                                            target="_blank">
                                                            <img src="images/ppe3/correction_bug/ecran/saisie_result_bug1.PNG"
                                                                alt="Capture d'écran de l'application"
                                                                class="responsive" />
                                                        </a>
                                                    </figure>
                                                    <p>
                                                        Cependant, si on ne renseigne aucun des champs, des messages
                                                        d’erreurs
                                                        s’affichent, il faudrait donc afficher un message d’erreur de la
                                                        même
                                                        façon pour la saisie d’une date d’engagement de frais antérieure
                                                        à la date
                                                        d’embauche.
                                                    </p>
                                                    <figure>
                                                        <a href="images/ppe3/correction_bug/ecran/saisie_result_bug2.PNG"
                                                            target="_blank">
                                                            <img src="images/ppe3/correction_bug/ecran/saisie_result_bug2.PNG"
                                                                alt="Capture d'écran de l'application"
                                                                class="responsive" />
                                                        </a>
                                                    </figure>
                                                    <p>Il est donc nécessaire de vérifier la saisie de l'utilisateur.
                                                        Pour cela, j'ai ajouté deux méthodes.
                                                        La première permet d'obtenir la date d’embauche de l’utilisateur
                                                        connecté. La seconde,
                                                        renvoie true si la date saisie est postérieure à la date
                                                        d’embauche, false si la date saisie
                                                        est antérieure à la date d’embauche.
                                                        J'ai également ajouter les instructions permettant l'affichage
                                                        du message d'erreur.
                                                        <br><br>
                                                        À la suite des modifications réalisées, en saisissant les mêmes
                                                        informations que
                                                        précédemment on obtient l’écran suivant : <br>
                                                    </p>
                                                    <figure>
                                                        <a href="images/ppe3/correction_bug/ecran/correction_bug.PNG"
                                                            target="_blank">
                                                            <img src="images/ppe3/correction_bug/ecran/correction_bug.PNG"
                                                                alt="Capture d'écran de l'application"
                                                                class="responsive" />
                                                        </a>
                                                    </figure>
                                                    <p>
                                                        Le bug étant corrigé, j’ai envoyé le mail suivant à
                                                        l’utilisateur :
                                                    </p>
                                                    <figure>
                                                        <a href="images/ppe3/correction_bug/ecran/reponse_mail.png"
                                                            target="_blank">
                                                            <img src="images/ppe3/correction_bug/ecran/reponse_mail.png"
                                                                alt="Capture d'écran de l'application"
                                                                class="responsive" />
                                                        </a>
                                                    </figure>
                                                </div>
                                                <h2 class="title-red">V- Maintenance évolutive</h2>
                                                <h3 class="title-green">1- Demande d'évolution</h3>
                                                <div>
                                                    <p>
                                                        Entre le 10 et le 20 du mois, le service comptabilité opère une
                                                        validation
                                                        des fiches du mois précédent qui sont dans l’état « Saisie
                                                        clôturée ».
                                                        <br>
                                                        Les comptables contrôlent que les frais forfaitisés sont
                                                        conformes :
                                                        nombre de jours enregistrés ne dépassant pas le nombre de jours
                                                        effectivement travaillés (congés), distance kilométrique
                                                        cohérente,
                                                        éventuellement consultation des fiches de compte-rendu pour
                                                        s’assurer
                                                        des déplacements effectifs. En cas d’incohérence ou d’erreur
                                                        constatée,
                                                        un contact est pris par téléphone avec le visiteur pour régler
                                                        le litige.
                                                        Les valeurs seront corrigées directement par le service
                                                        comptabilité. On
                                                        souhaite conserver la date de modification des valeurs s’il y a
                                                        lieu
                                                        ainsi que le code de l’employé ayant réalisé la modification.
                                                        <br>
                                                        Pour les <strong><em>frais hors forfait</em></strong>, le
                                                        service comptable s’appuie sur les
                                                        factures acquittées adressées par les visiteurs au plus tard le
                                                        10 du mois
                                                        suivant la saisie.
                                                        <br>
                                                        Les comptables valident ou non (frais non justifié ou non
                                                        professionnel par
                                                        exemple) les éléments de la demande. Une ligne de frais hors
                                                        forfait
                                                        <strong><em>non validée (donc refusée par un
                                                                comptable)</em></strong>doit être enregistrée dans un
                                                        <strong><em>état « supprimé ». </em></strong> Le visiteur doit
                                                        être tenu informé de cette suppression
                                                        par le comptable qui a traité sa demande. On n’enregistrera pas
                                                        la raison du refus mais les
                                                        documents annotés sont conservés par le service comptable. Les
                                                        agents comptables reportent sur
                                                        chaque facture reçue le numéro de matricule du visiteur, la date
                                                        (année/mois) de prise en charge
                                                        et les classent par ordre chronologique dans une pochette
                                                        nominative pour chaque visiteur.
                                                        <strong>Attention : lors de la validation finale de la fiche de
                                                            frais, le montant total validé
                                                            (total des frais validés) est enregistré sur la fiche de
                                                            frais.</strong>
                                                    </p>
                                                </div>
                                                <h3 class="title-green">2- Description des modifications à réaliser</h3>
                                                <div>
                                                    <p>
                                                        <strong>Modifications à réaliser dans la base de données :
                                                        </strong>
                                                    <ul>
                                                        <li>Ajouter deux colonnes dans la table lignefraisforfait :
                                                            dateModif et idUtilisateur</li>
                                                        <li>Ajouter trois colonnes dans la table lignefraisforfait :
                                                            dateModif, idUtilisateur et supprimerO¬_N</li>
                                                        <li>Ajouter une colonne dans la table fichefrais :
                                                            idUtilisateurValide</li>
                                                    </ul>

                                                    <strong>Modifications à réaliser dans les contrôleurs : </strong>
                                                    <ul>
                                                        <li>Créer un nouveau contrôleur c_gererValidation.php</li>
                                                        <ul>
                                                            <li>action 1 : Afficher la liste déroulante des fiches de
                                                                frais clôturées </li>
                                                            <li>action 2 : Afficher les frais forfaitisées et
                                                                non-forfaitisées</li>
                                                            <li>action 3 : Valider la modification des frais forfaitisés
                                                            </li>
                                                            <li>action 4 : supprimer les frais hors forfait</li>
                                                            <li>action 5 : valider la fiches de frais</li>
                                                        </ul>
                                                    </ul>
                                                    <strong>Modification à réaliser dans le modèle :</strong>
                                                    <ul>
                                                        <li>
                                                            Ajouter une méthode getLesInfosFichesFraisCL qui fait un
                                                            select dans la base
                                                            de données et retourne toutes les fiches de frais dans un
                                                            état CL (clôturées).
                                                        </li>
                                                        <li>
                                                            Ajouter une méthode getLesFraisForfaitCL qui fait un select
                                                            dans la base de données
                                                            et retourne les frais forfaitisés pour un idVisiteur et un
                                                            mois passé en paramètre.
                                                        </li>
                                                        <li>
                                                            Ajouter une méthode getLesFraisHorsForfaitCL qui fait un
                                                            select dans
                                                            la base de données et retourne les frais hors-forfaits pour
                                                            un idVisiteur et un mois passé en paramètre.
                                                        </li>
                                                        <li>
                                                            Ajouter une méthode majFraisForfaitEmpCompt qui met à jour
                                                            la quantité de chaque
                                                            frais forfaitisé dans la base de données selon la saisie de
                                                            l’employé
                                                            comptable avec la date de modification (date du jour) et
                                                            l’id de l’employé
                                                            comptable connecté.
                                                        </li>
                                                        <li>
                                                            Ajouter une méthode supprimerFraisHorsForfaitEmpCompt qui
                                                            fait un
                                                            update (suppression logique) dans la base de données en
                                                            mettant
                                                            supprimerO_N = ‘O’ ainsi que la date de modification et l’id
                                                            de l’employé comptable connecté.
                                                        </li>
                                                        <li>
                                                            Ajouter une méthode getMontantFraisForfait qui fait un
                                                            select dans la base de
                                                            données afin d’obtenir la somme des frais forfaitisés pour
                                                            un mois et un idVisiteur
                                                            passé en paramètre.
                                                        </li>
                                                        <li>
                                                            Ajouter une méthode getMontantFraisHorsForfait qui fait un
                                                            select dans la base de données
                                                            afin d’obtenir la somme des lignes de frais hors-forfait
                                                            pour un mois et un idVisiteur
                                                            passé en paramètre.
                                                        </li>
                                                        <li>
                                                            Ajouter une méthode validerFicheFrais qui va mettre à jour
                                                            l’idEtat de la fiche de
                                                            frais en le mettant dans un état VA (validée), la date de
                                                            modification sera la date
                                                            du jour, l’idUtilisateurModif sera l’id de l’utilisateur
                                                            connecté et le montant validé
                                                            sera la somme des montant de frais forfaitisés et des frais
                                                            hors forfait.
                                                        </li>
                                                    </ul>
                                                    <strong>Modifications à réaliser dans la vue :</strong>
                                                    <ul>
                                                        <li>Modifier la vue sommaire pour ajouter cette fonctionnalité.
                                                        </li>
                                                        <li>Créer une nouvelle vue v_listeFicheCL.php qui permettra
                                                            d’afficher la liste déroulante.</li>
                                                        <li>
                                                            Créer une nouvelle vue v_fraisForfaitCL.php qui permettra
                                                            l’affichage du formulaire
                                                            de modification des frais forfaitisés de la fiche de frais
                                                            sélectionnée précédemment
                                                        </li>
                                                        <li>
                                                            Créer une nouvelle vue v¬_fraisHorsForfaitCL.php qui
                                                            permettra l’affichage des
                                                            frais hors forfait de la fiche de frais sélectionnée
                                                            précédemment et de les supprimer.
                                                        </li>
                                                        <li>
                                                            Créer une nouvelle vue avec le bouton de validation de la
                                                            fiche de frais.
                                                        </li>
                                                    </ul>
                                                    </p>
                                                </div>
                                                <h3 class="title-green">3- Diagramme de cas d'utilisation</h3>
                                                <div>
                                                    <figure>
                                                        <a href="images/ppe3/maintenance_evolutive/use_case.PNG"
                                                            target="_blank">
                                                            <img src="images/ppe3/maintenance_evolutive/use_case.PNG"
                                                                class="responsive"
                                                                alt="Diagramme de cas d'utilisation" />
                                                        </a>
                                                        <figcaption>Diagramme de cas d’utilisation de l’application de
                                                            gestion des frais</figcaption>
                                                    </figure>
                                                </div>
                                                <h3 class="title-green">4- Schéma de l’application </h3>
                                                <div>
                                                    <figure>
                                                        <a href="images/ppe3/maintenance_evolutive/schema/schema_horizontal.png"
                                                            target="_blank">
                                                            <img src="images/ppe3/maintenance_evolutive/schema/schema_horizontal.png"
                                                                class="responsive"
                                                                alt="Diagramme de cas d'utilisation" />
                                                        </a>
                                                        <figcaption>Schéma de l'application</figcaption>
                                                    </figure>
                                                    Cliquez pour visualiser le schéma :
                                                    <ul>
                                                        <li> <a target="_blank"
                                                                href="images/ppe3/maintenance_evolutive/schema/index.png">d'index.php</a>
                                                        </li>
                                                        <li><a target="_blank"
                                                                href="images/ppe3/maintenance_evolutive/schema/c_connexion.png">du
                                                                contrôleur c_connexion.php</a></li>
                                                        <li><a target="_blank"
                                                                href="images/ppe3/maintenance_evolutive/schema/c_etatFrais.png">du
                                                                contrôleur c_etatfrais.php</a></li>
                                                        <li><a target="_blank"
                                                                href="images/ppe3/maintenance_evolutive/schema/c_gererFrais.png">du
                                                                contrôleur c_gererfrais</a></li>
                                                    </ul>
                                                    Voici les schéma du nouveau contrôleur c_gererValidation.php, des
                                                    vues et des méthodes qu’il appelle :
                                                    <figure>
                                                        <a href="images/ppe3/maintenance_evolutive/schema/c_gererValidation.png"
                                                            target="_blank">
                                                            <img src="images/ppe3/maintenance_evolutive/schema/c_gererValidation.png"
                                                                class="responsive"
                                                                alt="Diagramme de cas d'utilisation" />
                                                        </a>
                                                        <figcaption>Schéma du contrôleur c_gererValidation.php
                                                        </figcaption>
                                                    </figure>
                                                </div>
                                                <h3 class="title-green">5- Description des modifications réalisées</h3>
                                                <!-- <div>
                                                    <p>
                                                        Avec l’application existante, seuls les visiteurs médicaux avaient accès à 
                                                        l’application. Le seul type d’utilisateur présent dans la base de était 
                                                        « visiteur médical ». Pour que les employés comptables puissent aussi se 
                                                        connecter et avoir accès aux fonctionnalités les concernant, j’ai effectué 
                                                        des modifications dans la base de données. 
                                                        <br>J’ai tout d’abord ajouté une table typeUtilisateur avec un id et un 
                                                        libellé. J’ai ensuite saisi dans cette table quatre types d’utilisateur : 
                                                        visiteur médical, employé comptable, directeur comptabilité et admin. Une 
                                                        colonne a ensuite été ajoutée dans la table visiteur pour gérer le type 
                                                        d’utilisateur, cette colonne a une clé étrangère sur id de la table 
                                                        typeUtilisateur. J’ai ensuite exécuté la requête SQL suivante : 
                                                    </p>
                                                    <div class="text-center">update visiteur set idUtilisateur = 1</div>
                                                    <br>
                                                    <p>
                                                        Avec cette requête l’idUtilisateur de toutes les lignes présentes dans la 
                                                        table visiteur est 1. Il n’y a pas besoin de faire de where car dans la 
                                                        table visiteur il n’y a que des visiteurs médicaux.
                                                        <br>J’ai ensuite renommé la table visiteur en utilisateur, puis pour 
                                                        ne pas avoir à modifier toutes les requêtes SQL qui utiliseraient la 
                                                        table visiteur, j’ai créé une vue appelée « visiteur » qui fait un select 
                                                        de toutes les données de la table utilisateur où l’idTypeUtilisateur est 1, 
                                                        donc pour les visiteurs médicaux.
                                                    </p>
                                                    <p>
                                                        Pour pouvoir ajouter la nouvelle fonctionnalité permettant la validation 
                                                        des fiches de frais, j’ai créé un nouveau contrôleur que j’ai ensuite appelé 
                                                        dans le fichier index.php. J’ai également créé une nouvelle vue pour le sommaire 
                                                        des employés comptables dans laquelle j’ai ajouté le lien à la fonctionnalité 
                                                        que j’ai développé et un bouton « déconnexion ».
                                                    </p>
                                                </div>   -->
                                                <h4 class="title-blue">A- Ajout d’une liste déroulante pour sélectionner la fiche de frais
                                                </h4>
                                                <div>
                                                    <p>
                                                        Après que l’employé comptable se soit connecté, il obtient
                                                        l’écran suivant :
                                                    </p>
                                                    <figure>
                                                        <a href="images/ppe3/maintenance_evolutive/ecran/accueilEmpCompt.PNG"
                                                            target="_blank">
                                                            <img src="images/ppe3/maintenance_evolutive/ecran/accueilEmpCompt.PNG"
                                                                class="responsive" alt="capture de l'application" />
                                                        </a>
                                                        <figcaption>Page d'accueil du conseiller</figcaption>
                                                    </figure>
                                                    <p>
                                                        Lorsqu’il clique sur « Valider les fiches de frais » dans le
                                                        menu, il obtient
                                                        la page ci-dessous. L’utilisateur est invité à sélectionner une
                                                        fiche de
                                                        frais dans la liste déroulante. La liste déroulante affiche le
                                                        nom et le
                                                        prénom du visiteur médical ainsi que le mois et l’année auquels
                                                        correspond la fiche de frais. Lorsqu’une fiche est sélectionnée
                                                        dans
                                                        la liste déroulante, l’employé comptable doit appuyer sur
                                                        valider pour
                                                        afficher les frais forfaitisés et non-forfaitisés saisies par le
                                                        visiteur médical.
                                                    </p>
                                                    <figure>
                                                        <a href="images/ppe3/maintenance_evolutive/ecran/selectionFicheFrais.PNG"
                                                            target="_blank">
                                                            <img src="images/ppe3/maintenance_evolutive/ecran/selectionFicheFrais.PNG"
                                                                class="responsive" alt="capture de l'application" />
                                                        </a>
                                                    </figure>
                                                    <p>
                                                        Lorsque l’utilisateur clique sur "valider", la fiche de frais
                                                        qu’il a sélectionner va s’afficher.
                                                    </p>
                                                    Pour réaliser cela j'ai ajouté une méthode qui permet d’obtenir
                                                    toutes les fiches de frais à valider,
                                                    un nouveau contrôleur, et une nouvelle vue qui contient le code html
                                                    permettant l’affichage de la liste déroulante.
                                                    </p>
                                                </div>
                                                <h4 class="title-blue">B- Affichage de la fiche de frais </h4>
                                                <div>
                                                    <p>
                                                        La fiche de frais comporte les frais forfaitisés et les frais
                                                        non-forfaitisés.
                                                        Pour les frais forfaitisés (forfait étape, frais kilométrique,
                                                        nuitée
                                                        hotel et repas restaurant), le visiteur médical saisit une
                                                        quantité, puis est
                                                        remboursé le montant forfaitaire du type de frais multiplié par
                                                        sa quantité.
                                                        Les frais hors forfait sont saisis par le visiteur médical, il
                                                        saisit une date,
                                                        un libellé de frais et un montant, puis valide.
                                                        <br>
                                                        L’employé comptable doit pouvoir modifer la quantité de chaque
                                                        type de frais
                                                        forfaitisé et supprimer des frais hors forfait.
                                                        <br><br>
                                                        Pour cela il faut que les frais forfaitisés soit afficher sous
                                                        la forme
                                                        de textbox pré-remplies avec les informations saisies par le
                                                        visiteur
                                                        médicale pour la fiche de frais sélectionné. Pour obtenir ces
                                                        informations
                                                        j’ai utilisée une méthode déjà existante.
                                                        <br>
                                                        Les frais hors forfait doivent être affiché sous la forme d’un
                                                        tableau
                                                        comportant la date, le libellé, le montant du frais et un
                                                        bounton « supprimer ce frais ».

                                                        <br><br>
                                                        Voici l’écran qu’obtient l’utilisateur après avoir sélectionné
                                                        une fiche de
                                                        frais et cliqué sur le bouton "valider" :
                                                        <br>
                                                    </p>
                                                    <figure>
                                                        <a href="images/ppe3/maintenance_evolutive/ecran/AfficherFicheFrais.png"
                                                            target="_blank">
                                                            <img src="images/ppe3/maintenance_evolutive/ecran/AfficherFicheFrais.png"
                                                                class="responsive" alt="capture de l'application" />
                                                        </a>
                                                    </figure>
                                                    <p>
                                                        Dans la liste déroulante (1), la fiche sélectionnée est celle
                                                        qui a été sélectionnée
                                                        précedemment. Il est possible de changer de fiche en utilisant
                                                        cette liste déroulante.
                                                        En dessous, se trouve les frais forfaitisés (2) et
                                                        non-forfaitisés (3) saisis par
                                                        le visiteur médical pour le mois sélectionné. Tout en bas de la
                                                        page se trouve le
                                                        bouton pour valider la fiche de frais (4).
                                                    </p>
                                                </div>
                                                <h4 class="title-blue">C- Modification des frais forfaitisés </h4>
                                                <div>
                                                    <p>
                                                        L’utilisateur peut modifier les quantité pour chaque frais
                                                        forfaitisé.Pour cela l’utilisateur doit simplement
                                                        modifier la valeurs dans la zone de saisie correspondant au type
                                                        de frais forfaitisé puis cliquer sur « valider ».
                                                    </p>
                                                    <figure>
                                                        <a href="images/ppe3/maintenance_evolutive/ecran/modifieFiche.png"
                                                            target="_blank">
                                                            <img src="images/ppe3/maintenance_evolutive/ecran/modifieFiche.png"
                                                                class="responsive" alt="capture de l'application" />
                                                        </a>
                                                    </figure>
                                                </div>
                                                <h4 class="title-blue">D- Suppression d’un frais hors forfait</h4>
                                                <div>
                                                    <p>
                                                        L’employé comptable peut supprimer un frais en cliquant sur le
                                                        bouton supprimer
                                                        à la fin de la ligne de frais.
                                                        <br>
                                                    </p>
                                                    <figure>
                                                        <a href="images/ppe3/maintenance_evolutive/ecran/supprimerFraisHF2.png"
                                                            target="_blank">
                                                            <img src="images/ppe3/maintenance_evolutive/ecran/supprimerFraisHF2.png"
                                                                width="60%" height="auto"
                                                                alt="capture de l'application" />
                                                        </a>
                                                    </figure>
                                                    <p>
                                                        Lorsque l’utilisateur supprime une ligne, celle-ci n’apparaît
                                                        plus dans
                                                        le tableau comportant les frais hors forfait de la fiche de
                                                        frais.
                                                    </p>
                                                </div>
                                                <h4 class="title-blue">E- Validation de la fiche de frais </h4>
                                                <div>
                                                    <p>
                                                        Lorsqu’une fiche de frais est validée, le montant validé
                                                        doit être enregistré dans la base de donnée. Pour cela,
                                                        il faut calculer le montant total des frais forfaitisés
                                                        et des frais hors forfait puis faire la somme des deux.
                                                    </p>
                                                    <!-- <p>
                                                            J’ai donc réalisé la méthode getMontantFraisForfait. Cette 
                                                            méthode fait un select dans la base de données et multiplie 
                                                            la quantité par le montant du frais forfaitisé puis fait la 
                                                            somme de toutes les lignes de frais forfaitisé pour l’utilisateur 
                                                            et le mois passé en paramètre et retourne cette somme.
                                                        </p> -->
                                                    <!-- <figure>
                                                                <a href="images/ppe3/maintenance_evolutive/code/getMontantFraisForfait.PNG" target="_blank">
                                                                    <img src="images/ppe3/maintenance_evolutive/code/getMontantFraisForfait.PNG" class="responsive" alt="capture de l'application"/>
                                                                </a>
                                                            </figure>
                                                        <p>
                                                            J’ai ensuite ajouté la méthode getMontantFraisHorsForfait. Elle fait un 
                                                            select dans la base de données qui effectue la somme de toutes les 
                                                            lignes de frais hors forfait pour un mois et un utilisateur passé 
                                                            en paramètre et pour les lignes dont la colonne supprimerO_N 
                                                            contient ‘N’ ou null.
                                                        </p>
                                                        <figure>
                                                            <a href="images/ppe3/maintenance_evolutive/code/getMontantFraisHorsForfait.PNG" target="_blank">
                                                                <img src="images/ppe3/maintenance_evolutive/code/getMontantFraisHorsForfait.PNG" class="responsive" alt="capture de l'application"/>
                                                            </a>
                                                        </figure>
                                                        <p>
                                                            Enfin, j’ai ajouté la méthode validerFicheFrais qui va fairte un update dans la base de 
                                                            données. La fiche de frais aura pour état VA (validée), le montant validé sera la 
                                                            somme des du montant total des frais forafaitisés et des frais hors forfait, 
                                                            l’idUtilisateur sera l’id de l’utilisateur connecté et la date de modification 
                                                            sera la date du jour. 
                                                        </p>
                                                        <figure>
                                                            <a href="images/ppe3/maintenance_evolutive/code/validerFicheFrais.PNG" target="_blank">
                                                                <img src="images/ppe3/maintenance_evolutive/code/validerFicheFrais.PNG" class="responsive" alt="capture de l'application"/>
                                                            </a>
                                                        </figure>
                                                        <p>
                                                            Pour effectuer la validation, j’ai ajouté un case dans le contrôleur c_gererValidation dans lequel on 
                                                            appele les méthodes getMontantFraisHorsForfait et getMontantFraisForfait, avant 
                                                            de faire la somme des résultats retournés par la méthode. Puis on appele la 
                                                            méthode validerFicheFrais en passant en paramètre l’id du visiteur médical, le mois, 
                                                            l’id de l’employé comptable connecté  ainsi que le résultat de la somme des frais effectué
                                                             précedemment.  Enfin on appelle la méthode permettant d’obtenir toutes les fiches de 
                                                             frais à valider et la vue permettant de l’afficher.  
                                                             <br><br> -->
                                                    </p>
                                                    <p>
                                                        Lorsque l’employé médical clique sur la bouton valider en bas de
                                                        la page, la fiche est validé.
                                                    </p>
                                                    <figure>
                                                        <a href="images/ppe3/maintenance_evolutive/ecran/valider_fiche.png"
                                                            target="_blank">
                                                            <img src="images/ppe3/maintenance_evolutive/ecran/valider_fiche.png"
                                                                class="responsive" alt="capture de l'application" />
                                                        </a>
                                                    </figure>
                                                    <p>
                                                        Après que l’utilisateur a cliqué sur "valider", il doit à
                                                        nouveau sélectionner une fiche de frais à valider.
                                                        Voici l’écran qu’il obtient :
                                                    </p>
                                                    <figure>
                                                        <a href="images/ppe3/maintenance_evolutive/ecran/apresValidationFiche.PNG"
                                                            target="_blank">
                                                            <img src="images/ppe3/maintenance_evolutive/ecran/apresValidationFiche.PNG"
                                                                class="responsive" alt="capture de l'application" />
                                                        </a>
                                                    </figure>
                                                </div>
                                                <div>
                                                    <!-- <button type="button" class="btn btn-outline-dark">Dark</button> -->
                                                    <p><a class="btn btn-outline-dark" target="_blank"
                                                            href="files/PPE3/Descriptif_PPE2_V2.pdf">Télécharger le
                                                            descriptif détaillé <i class="icon-download4"></i></a></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

            </div><!-- end:colorlib-main -->
        </div><!-- end:container-wrap -->
    </div><!-- end:colorlib-page -->
    <!-- jQuery -->
    <script src="js/jquery.min.js"></script>
    <!-- jQuery Easing -->
    <script src="js/jquery.easing.1.3.js"></script>
    <!-- Bootstrap -->
    <script src="js/bootstrap.min.js"></script>
    <!-- Waypoints -->
    <script src="js/jquery.waypoints.min.js"></script>
    <!-- Flexslider -->
    <script src="js/jquery.flexslider-min.js"></script>
    <!-- Owl carousel -->
    <script src="js/owl.carousel.min.js"></script>
    <!-- Counters -->
    <script src="js/jquery.countTo.js"></script>


    <!-- MAIN JS -->
    <script src="js/main.js"></script>

</body>

</html>
